# 交接說明 - Hakkast 播客生成系統

## 📋 專案交接摘要

親愛的朋友，您好！

我已經完成了 Hakkast 播客生成系統的核心 AI 功能開發，現在需要您的幫助來完善爬蟲模組。以下是完整的交接說明。

## ✅ 已完成的功能

### 1. 核心 AI 播客生成系統
- **檔案位置**: `backend/app/services/pydantic_ai_service.py`
- **功能**: 使用 TWCC AFS (llama3.1-ffm-70b-32k-chat) 生成雙主持人對話式播客腳本
- **特色**: 
  - 結構化輸出 (Pydantic 模型)
  - 支援教育、休閒、故事、訪談等多種風格
  - 自動內容分析和腳本優化
  - TWCC 失敗時自動切換到 Gemini

### 2. 播客腳本格式
- **輸出格式**: 完整的雙主持人深度對話
- **範例**: 請參考 `backend/sample_dialogue_podcast.txt`
- **特色**: 包含開場、深度分析、總結等完整結構

### 3. 測試系統
- **測試檔案**: `backend/final_dialogue_generator.py`
- **狀態**: 已測試並能正常生成 18-20 分鐘的深度對話播客

## 🎯 您需要開發的爬蟲功能

### 優先級 1: 基礎爬蟲 (必須)
1. **擴展爬蟲模型** - 完善 `app/models/crawler.py`
2. **實現基礎爬蟲服務** - 開發 `app/services/crawler_service.py`
3. **單一 URL 爬取功能** - 測試基本網頁內容提取

### 優先級 2: 多源支援 (重要)  
1. **台灣新聞網站適配器** - 中央社、自由時報、聯合報
2. **關鍵詞搜尋功能** - 根據關鍵詞自動搜尋相關新聞
3. **內容處理** - 去重、品質評分、關鍵詞提取

### 優先級 3: 整合優化 (建議)
1. **API 端點** - RESTful API 提供爬蟲服務
2. **與播客生成整合** - 爬蟲→AI 播客的完整管線
3. **效能優化** - 並發處理、速率限制、錯誤處理

## 📁 提供給您的文檔

1. **`CRAWLER_DEVELOPMENT_GUIDE.md`** - 完整的開發指南和架構說明
2. **`CRAWLER_CODE_EXAMPLES.md`** - 詳細的範例代碼和實現框架
3. **`CRAWLER_TODO_AND_TESTS.md`** - 開發待辦清單和測試指南

## 🔗 整合介面

### 爬蟲輸出 → AI 輸入
```python
# 您開發的爬蟲需要提供這樣的資料結構
crawled_content: List[CrawledContent] = [
    CrawledContent(
        title="新聞標題",
        content="完整新聞內容", 
        summary="新聞摘要",
        url="原始網址",
        source="新聞來源",
        keywords=["關鍵詞1", "關鍵詞2"]
        # ... 其他欄位
    )
]

# AI 系統會自動使用這些內容生成播客
result = await ai_service.generate_complete_podcast_content(
    request, 
    crawled_content=crawled_content  # 您提供的爬蟲內容
)
```

### 完整工作流程
```
用戶輸入關鍵詞 
    ↓
爬蟲獲取相關新聞 (您開發的部分)
    ↓  
AI 分析並生成播客腳本 (已完成)
    ↓
輸出完整對話式播客
```

## 🚀 建議的開發順序

### Week 1-2: 基礎功能
1. 研讀提供的文檔和範例代碼
2. 設定開發環境和依賴套件
3. 實現基本的單一 URL 爬取功能
4. 測試與現有 AI 系統的整合

### Week 3-4: 擴展功能
1. 添加第一個新聞網站適配器 (建議中央社)
2. 實現關鍵詞搜尋功能
3. 開發內容處理和品質控制
4. 完成基本的測試案例

### Week 5-6: 優化整合
1. 添加更多新聞來源支援
2. 實現並發處理和效能優化
3. 開發 RESTful API 端點
4. 完整的整合測試

## 💡 開發提示

1. **從簡單開始**: 先讓一個網站的爬取功能正常工作
2. **測試驅動**: 每個功能都寫對應的測試案例
3. **逐步擴展**: 一個網站一個網站地添加支援
4. **參考現有代碼**: 看看 `pydantic_ai_service.py` 如何處理爬蟲內容

## 📞 支援資源

### 測試用的關鍵詞範例
- "人工智慧", "台灣科技" (科技新聞)
- "菲律賓", "南海", "美國" (國際新聞) 
- "經濟", "股市", "貿易" (財經新聞)

### 現有的測試檔案
- `backend/final_dialogue_generator.py` - 查看 AI 服務如何使用爬蟲內容
- `backend/test_philippines_dialogue.py` - 測試範例

### 如需協助
- 查看 `pydantic_ai_service.py` 了解 AI 服務的介面需求
- 執行 `python final_dialogue_generator.py` 看看完整的播客生成流程
- 參考提供的三個 Markdown 文檔了解詳細需求

## 🎯 成功指標

### 最小可用產品 (MVP)
- [ ] 能夠爬取至少一個台灣新聞網站
- [ ] 支援關鍵詞搜尋功能
- [ ] 能夠與現有 AI 系統整合生成播客
- [ ] 基本的錯誤處理和內容品質控制

### 完整功能版本
- [ ] 支援 3-5 個主要新聞網站
- [ ] 完整的內容處理 (去重、評分、關鍵詞提取)
- [ ] RESTful API 提供服務
- [ ] 完整的測試覆蓋率
- [ ] 效能優化和並發處理

祝您開發順利！如果有任何問題，可以隨時參考提供的文檔或查看現有的代碼範例。

---
交接日期: 2025年7月22日  
AI 功能完成度: ✅ 100%  
爬蟲功能待開發: 🔄 0% → 您的任務
